<!DOCTYPE html>

<html>

	<head>
		<title>Infant Mortality Rate</title>
		<meta charset="utf-8">
		<!-- Add styles -->
		<link rel="stylesheet" type="text/css" href="index.css">
	</head>

<!-- Load d3.js -->
<script src="https://d3js.org/d3.v5.min.js"></script>


	<body>
	<h1 id="intro">Infant Mortality Rate in 2023</h1>
    <div>
        <span class="italic">By Naveen Baskaran - UIUC CS 416 - July 2024</span>
        <hr>

        <h4>
            Infant mortality rate review for 2023.
        </h4>
        <ul>
            <li>
                <a href="#one" class="contents">Countries with higher IMR!</a>
            </li>
            <li>
                <a href="#two" class="contents">Does a country's GDP have a direct correlation to IMR?</a>
            </li>
            <li>
                <a href="#three" class="contents">Fertility rate impact?</a>
            </li>
        </ul>
        <hr>

    </div>
	
		<!-- Create a div where the graph will take place -->
		<div id="scene1"></div>
		<hr> 
		<div id="scene2"></div>
		<hr> 
		<div id="scene3"></div>


<script>

// set the dimensions and margins of the graph
var margin = {top: 10, right: 30, bottom: 30, left: 60},
//    width = 460 - margin.left - margin.right,
//    height = 400 - margin.top - margin.bottom;

    width = 800 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;


// append the svg object to the body of the page
var svg = d3.select("#scene3")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");

//Read the data
//d3.csv("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/iris.csv", function(data) {
d3.csv("https://raw.githubusercontent.com/naveenkcb/naveenkcb.github.io/main/narrative-viz-proj/world-data-2023-cleaned-3.csv").then ( function(data) {


  // Add X axis
  var x = d3.scaleLinear()
    .domain([0, 7])
    .range([ 0, width ]);
  svg.append("g")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x));

  // Add Y axis
  var y = d3.scaleLinear()
    .domain([0, 100])
    .range([ height, 0]);
  svg.append("g")
    .call(d3.axisLeft(y));

  // Color scale: give me a specie name, I return a color
  var color = d3.scaleOrdinal()
    .domain(["Low", "Medium", "High" ])
    //.range([ "#440154ff", "#21908dff", "#fde725ff"])
	.range([ "cyan", "purple", "orange"])


	var scatter_tooltip = d3.select("body")
				.append("div")
				.append("div")
				.style("opacity", 0)
				.attr("class", "tooltip")
				.style("background-color", "black")
				.style("border-radius", "15px")
				.style("padding", "8px")
				.style("color", "white")


  // Add dots
  svg.append('g')
    .selectAll("dot")
    .data(data)
    .enter()
    .append("circle")
      .attr("cx", function (d) { return x(d.Fertility_Rate); } )
      .attr("cy", function (d) { return y(d.Infant_Mortality); } )
      .attr("r", 5)
      .style("fill", function (d) { return color(d.IMR_Severity) } )
	    .on("mouseover", function (d) {
				scatter_tooltip.transition()
								.duration(200)
								.style("opacity", .9);
							scatter_tooltip.html("Country: " + d.Country + " , " + "Infant Mortality: " + d.Infant_mortality)
								.style("left", (d3.event.pageX) + "px")
								.style("top", (d3.event.pageY - 28) + "px");
						})
						
					.on("mouseout", function (d) {
						scatter_tooltip.transition()
							.duration(500)
							.style("opacity", 0);
					});

	// Add X axis label:
	svg.append("text")
		.attr("text-anchor", "end")
		.attr("x", width)
		.attr("y", height + margin.top + 20)
		.text("Fertility Rate (# of childs per woman)");

	// Y axis label:
	svg.append("text")
		.attr("text-anchor", "end")
		.attr("transform", "rotate(-90)")
		.attr("y", -margin.left+20)
		.attr("x", -margin.top)
		.text("Infant Mortality Rate (# of deaths per 1000 live births)")
	

					
			// Annotation
			scene3.append('rect')
				.attr("x", 150)
				.attr("y", 5)
				.attr("width", 500)
				.attr("height", 30)
				.style("fill", 'lightblue')

			scene3.append('text')
				.attr("x", 160)
				.attr("y", 15)
				.attr("width", 60)
				.attr("height", 20)
				.style("fill", 'red')
				.text("Hover the mouse over each data point to see additional details.")
				.attr("text-anchor", "left")
				.style("alignment-baseline", "middle")

})

</script>

	</body>
</html>